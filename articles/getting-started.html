<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Introduction to eemanalyzeR • eemanalyzeR</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Introduction to eemanalyzeR">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">eemanalyzeR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/getting-started.html">Introduction to eemanalyzeR</a></li>
    <li><a class="dropdown-item" href="../articles/output-documentation.html">Interpreting eemanalyzeR Outputs</a></li>
    <li><a class="dropdown-item" href="../articles/eemanalyzeR-indices.html">Calculating Indices with eemanalyzeR Method</a></li>
    <li><a class="dropdown-item" href="../articles/custom-indices.html">Creating a Custom Function to Calculate Indices</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/katiewampler/eemanalyzeR/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Introduction to eemanalyzeR</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/katiewampler/eemanalyzeR/blob/master/vignettes/getting-started.Rmd" class="external-link"><code>vignettes/getting-started.Rmd</code></a></small>
      <div class="d-none name"><code>getting-started.Rmd</code></div>
    </div>

    
    
<p><code>eemanalyzeR</code> is an R package used providing tools for
processing and analyzing raw excitation-emission matrices (EEMs) and
absorbance data. Includes functions for:</p>
<ul>
<li>data cleaning</li>
<li>quality assurance</li>
<li>calculation of indices</li>
<li>generating visualizations</li>
<li>exported cleaned data</li>
</ul>
<p>The package is designed to creates a streamlined and automated
workflow that ensures consistent analysis and simplifies the coding
required to process the data.</p>
<hr>
<div class="section level2">
<h2 id="the-need">The Need<a class="anchor" aria-label="anchor" href="#the-need"></a>
</h2>
<p>While many instruments to measure EEMs and absorbance come with built
in software to perform post-processing steps, using those tools can lead
to reproducibility issues as the processing steps are often not well
tracked or easily repeatable.</p>
<p>The <a href="https://dreem.openfluor.org/" class="external-link">drEEM toolbox</a> in
MATLAB was one of the first tools to address this issue, allowing for
users to create a processing script that allowed for replication and
consistent methods. However, MATLAB is a proprietary software, limiting
its accessibly.</p>
<p>Two R packages have been created to provide open access processing
tools:</p>
<ul>
<li><a href="https://CRAN.R-project.org/package=eemR" class="external-link"><code>eemR</code></a></li>
<li><a href="https://CRAN.R-project.org/package=staRdom" class="external-link"><code>staRdom</code></a></li>
</ul>
<p>However, these tools require a fair bit of coding knowledge to set up
a processing procedure. The <code>eemanalyzeR</code> package aims to be
simple enough that undergraduates, who are often the ones running the
instruments, can process the data to shorten the time between data
collection and data checks to ensure samples can be rerun within hold
times.</p>
<p><strong>This package aims to fill the following gaps:</strong></p>
<ul>
<li>More comprehensive dealing with absorbance data</li>
<li>Applying QA/QC checks to ensure quality data</li>
<li>Automate processing via a single function to make it easy for
beginner coders to use</li>
<li>Retain the ability to customize processing steps</li>
</ul>
<hr>
</div>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>Install and load the most recent approved version from CRAN by
running</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"eemanalyzeR"</span><span class="op">)</span></span></code></pre></div>
<p>Install and load the most recent version of <code>eemanalyzeR</code>
from GitHub by running</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Installing from GitHub requires you first install the remotes package</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"remotes"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># install the most recent version from GitHub</span></span>
<span><span class="fu">remotes</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"katiewampler/eemanalyzeR"</span>, ref <span class="op">=</span> <span class="st">"master"</span><span class="op">)</span></span></code></pre></div>
<p>Install and load the most recent <strong>development</strong> version
of <code>eemanalyzeR</code> from GitHub by running</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Installing from GitHub requires you first install the remotes package</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"remotes"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># install the most recent development version from GitHub</span></span>
<span><span class="fu">remotes</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"katiewampler/eemanalyzeR"</span>, ref <span class="op">=</span> <span class="st">"dev"</span><span class="op">)</span></span></code></pre></div>
<p>Load the package</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://CRAN.R-project.org/package=eemanalyzeR" class="external-link">eemanalyzeR</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; Registered S3 method overwritten by 'eemanalyzeR':</span></span>
<span><span class="co">#&gt;   method       from</span></span>
<span><span class="co">#&gt;   plot.eemlist eemR</span></span>
<span><span class="co">#&gt; User configuration loaded from file:</span></span>
<span><span class="co">#&gt; ~/.local/share/eemanalyzeR/user-config.yaml</span></span></code></pre></div>
<hr>
</div>
<div class="section level2">
<h2 id="processing-data">Processing Data<a class="anchor" aria-label="anchor" href="#processing-data"></a>
</h2>
<p>To go from raw data to processed and clean data use the <a href="../html/run_eems.html">run_eems</a> function. At a minimum this
requires the following arguments:</p>
<ul>
<li>
<strong>input_dir:</strong> the file path to the folder containing
the raw EEMs and absorbance files on your computer.</li>
<li>
<strong>filename:</strong> the name of your project, used to name
your exported files.</li>
</ul>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span>  <span class="fu"><a href="../reference/run_eems.html">run_eems</a></span><span class="op">(</span>input_dir <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, package <span class="op">=</span> <span class="st">"eemanalyzeR"</span><span class="op">)</span>,</span>
<span>           filename <span class="op">=</span> <span class="st">"eemanalyzeR-example"</span>, interactive <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<p>This function will export the processed data, indices calculations,
and plots by defaults we can look at the function outputs.</p>
<pre><code><span><span class="co">#&gt; ~/</span></span>
<span><span class="co">#&gt; ├── <span style="color: #BB00BB; font-weight: bold;">B1S1ExampleBlankSEM.png</span></span></span>
<span><span class="co">#&gt; ├── <span style="color: #BB00BB; font-weight: bold;">B1S2ExampleTeaStdSEM.png</span></span></span>
<span><span class="co">#&gt; ├── <span style="color: #BB00BB; font-weight: bold;">B1S3ExampleSampleSEM.png</span></span></span>
<span><span class="co">#&gt; ├── <span style="color: #BB00BB; font-weight: bold;">ManualExampleTeaWaterfallPlotSample.png</span></span></span>
<span><span class="co">#&gt; ├── <span style="color: #BB00BB; font-weight: bold;">absorbance_plot_eemanalyzeR-example.png</span></span></span>
<span><span class="co">#&gt; ├── <span style="color: #BB00BB; font-weight: bold;">summary_plots_eemanalyzeR-example.png</span></span></span>
<span><span class="co">#&gt; ├── absindices_eemanalyzeR-example.csv</span></span>
<span><span class="co">#&gt; ├── fluorindices_eemanalyzeR-example.csv</span></span>
<span><span class="co">#&gt; ├── metadata_eemanalyzeR-example.csv</span></span>
<span><span class="co">#&gt; ├── processed_data_eemanalyzeR-example.rds</span></span>
<span><span class="co">#&gt; └── readme_eemanalyzeR-example.txt</span></span></code></pre>
<div class="section level3">
<h3 id="the-outputs">The Outputs<a class="anchor" aria-label="anchor" href="#the-outputs"></a>
</h3>
<ul>
<li>
<strong>*_indices_filename.csv</strong>:The absorbance and
fluorescence indices</li>
<li>
<strong>absorbance_plot_filename.png:</strong> Plot showing the
absorbance spectra</li>
<li>
<strong>* .png:</strong> Plots of the individual EEMs</li>
<li>
<strong>summary_plots_filename.png:</strong> Plot showing all of the
EEMs together</li>
<li>
<strong>readme_filename.txt:</strong> A text file detailing the
processing steps and any warnings that occurred during data
processing</li>
<li>
<strong>processed_data_filename.rds:</strong> An R readable object
containing all of the exported data</li>
</ul>
<hr>
</div>
</div>
<div class="section level2">
<h2 id="setting-up-processing-defaults">Setting up Processing Defaults<a class="anchor" aria-label="anchor" href="#setting-up-processing-defaults"></a>
</h2>
<p><code>eemanalyzeR</code> will process files directly “out of the
box”, but specific research projects may have differing processing
needs. If you would like to consistently modify the defaults used in the
<a href="../html/run_eems.html">run_eems</a> function you can use the <a href="../html/user_config.html">edit_user_config</a> function. This will
create a YAML file with your selected defaults which is stored on your
computer will be read when you load the package.</p>
<hr>
</div>
<div class="section level2">
<h2 id="creating-qaqc-standards">Creating QA/QC Standards<a class="anchor" aria-label="anchor" href="#creating-qaqc-standards"></a>
</h2>
<p>One of the goals with the <code>eemanalyzeR</code> package was to
build in QA/QC checks to ensure data quality. While not required to use
the package, you can use the <a href="../html/create_mdl.html">create_mdl</a> and <a href="../html/create_std.html">create_std</a> functions. These function
requires a directory of analytical blanks and check standards (for
instance the <a href="doi:10.3133/ofr20181096">tea standard</a>
recommended by the USGS). While you can create these standards with any
number of samples, its recommended to use at least 20 for stability.</p>
<p>Use the following code to create the method detection limit (MDL)
files. These by default will be stored in your user-specific data
directory and loaded when needed to process samples.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#specify where the long-term blank files live</span></span>
<span><span class="va">dir</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, package <span class="op">=</span> <span class="st">"eemanalyzeR"</span><span class="op">)</span>, <span class="st">"long-term-blanks"</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#generate mdl file</span></span>
<span><span class="va">eem_mdl</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_mdl.html">create_mdl</a></span><span class="op">(</span><span class="va">dir</span>, type <span class="op">=</span> <span class="st">"eem"</span><span class="op">)</span> </span>
<span><span class="va">abs_mdl</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_mdl.html">create_mdl</a></span><span class="op">(</span><span class="va">dir</span>, type <span class="op">=</span> <span class="st">"abs"</span><span class="op">)</span></span></code></pre></div>
<p>We can use a similar process to create the check standard files.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#specify where the long-term blank files live</span></span>
<span><span class="va">dir</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, package <span class="op">=</span> <span class="st">"eemanalyzeR"</span><span class="op">)</span>, <span class="st">"long-term-std"</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#generate mdl file</span></span>
<span><span class="va">eem_std</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_std.html">create_std</a></span><span class="op">(</span><span class="va">dir</span>, type <span class="op">=</span> <span class="st">"eem"</span>, abs_pattern <span class="op">=</span> <span class="st">"ABS"</span><span class="op">)</span> </span>
<span><span class="va">abs_std</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_std.html">create_std</a></span><span class="op">(</span><span class="va">dir</span>, type <span class="op">=</span> <span class="st">"abs"</span>, abs_pattern <span class="op">=</span> <span class="st">"ABS"</span><span class="op">)</span></span></code></pre></div>
<p>These files will be used when calculating absorbance and fluorescence
indices to ensure:</p>
<ol style="list-style-type: decimal">
<li>Sample index values are “real” and distinguishable above a blank
(above MDL)
<ul>
<li>Prevents reporting of values that are just noise</li>
</ul>
</li>
<li>The analytical blanks in the sample run are blank (below MDL)
<ul>
<li>Checks for potential contamination</li>
</ul>
</li>
<li>Check standard index values in the sample run are consistent with a
long-term standard (within 20 % of mean standard)
<ul>
<li>Checks for potential run issues (air bubbles, equipment issues,
calculation issues)</li>
</ul>
</li>
</ol>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Katie A. Wampler, Ryan P. Cole.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
