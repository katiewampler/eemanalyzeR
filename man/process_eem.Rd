% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/process-eem.R
\name{process_eem}
\alias{process_eem}
\title{Process and correct excitation–emission matrices (EEMs)}
\usage{
process_eem(
  eemlist,
  abslist,
  ex_clip = c(247, 450),
  em_clip = c(247, 600),
  type = c(TRUE, TRUE, TRUE, TRUE),
  width = c(16, 3, 30, 10),
  interpolate = c(TRUE, TRUE, FALSE, FALSE),
  method = 1,
  cores = 1,
  cuvle = 1
)
}
\arguments{
\item{eemlist}{An \code{eemlist} object.}

\item{abslist}{An \code{abslist} object.}

\item{ex_clip}{Numeric vector of length two specifying the minimum and
maximum excitation wavelengths to keep.}

\item{em_clip}{Numeric vector of length two specifying the minimum and
maximum emission wavelengths to keep.}

\item{type}{Logical vector of length four indicating which scattering lines to remove.
The order is "raman1", "raman2", "rayleigh1", "rayleigh2".}

\item{width}{Numeric vector of length four specifying the width of scattering
lines to remove (nm). Same order as \code{type}.}

\item{interpolate}{Logical vector of length four indicating which scattering
lines to interpolate. Same order as \code{type}.}

\item{method}{Numeric (0–4) specifying the interpolation method to use.
Default is 1. See \code{\link[staRdom:eem_interp]{staRdom::eem_interp()}} for details.}

\item{cores}{Integer specifying the number of cores for parallel computation
during interpolation.}

\item{cuvle}{Cuvette (path) length in cm.}
}
\value{
An \code{eemlist} object with processed and corrected EEMs.
}
\description{
Wrapper function that combines multiple EEM processing steps into a
streamlined workflow. The processing steps include:
\itemize{
\item \code{\link[=subtract_blank]{subtract_blank()}}: subtracts blank samples from the EEMs
\item \code{\link[=remove_scattering]{remove_scattering()}}: removes scattering lines with optional interpolation
\item \code{\link[=ife_correct]{ife_correct()}}: corrects for inner filter effects
\item \code{\link[=raman_normalize]{raman_normalize()}}: normalizes fluorescence intensity to Raman units
\item \code{\link[=correct_dilution]{correct_dilution()}}: adjusts intensity for sample dilutions
\item \code{\link[eemR:eem_cut]{eemR::eem_cut()}}: clips the excitation–emission matrices to the region of interest
}
}
\details{
\subsection{Metadata}{

Absorbance and EEM data are linked via the \code{meta_name} in the metadata.
Metadata must already be added to the samples using \code{\link[=add_metadata]{add_metadata()}}.
}

\subsection{Tracking Processing Steps}{

Processing steps are tracked in two ways:
\itemize{
\item Each sample has an attribute that records its processing steps.
You can view this using \code{attributes(eem)}.
\item Overall processing steps are recorded in a \code{readme} variable
(accessible using \code{\link[=print_readme]{print_readme()}}) or exported as the \code{readme.txt} file
using \code{\link[=export_data]{export_data()}}.
}
}
}
\examples{
eemlist <- add_metadata(metadata, example_eems)
abslist <- add_metadata(metadata, example_abs)
blanklist <- subset_type(eemlist, "iblank")
eemlist <- add_blanks(eemlist, blanklist)
corrected_eem <- process_eem(eemlist, abslist)
plot(corrected_eem)

}
