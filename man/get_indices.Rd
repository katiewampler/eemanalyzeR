% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/get-indices.R
\name{get_indices}
\alias{get_indices}
\title{Get fluorescence and absorbance indices}
\usage{
get_indices(
  eemlist,
  abslist,
  index_method = "eemanalyzeR",
  tolerance = 0.2,
  return = "wide",
  cuvle = 1,
  qaqc_dir = NA,
  arg_names = NULL
)
}
\arguments{
\item{eemlist}{An \code{eemlist} object.}

\item{abslist}{An \code{abslist} object.}

\item{index_method}{Either "eemanalyzeR", "eemR", "usgs", or a custom
function. See \strong{Details}.
#TODO I don't think the package environment has support for index_method to be a function yet}

\item{tolerance}{Maximum percent deviation that the check standard can vary
from the long-term values without being flagged.}

\item{return}{Output format: "long" or "wide".}

\item{cuvle}{Cuvette (path) length in cm.}

\item{qaqc_dir}{File path to the QAQC files generated with \code{\link[=create_mdl]{create_mdl()}}
and \code{\link[=create_std]{create_std()}}. Default is a user-specific data directory
\code{\link[rappdirs:user_data_dir]{rappdirs::user_data_dir()}}.}

\item{arg_names}{Optional list of arguments passed from higher-level
functions for README generation.}
}
\value{
A list with two data frames:
\itemize{
\item \strong{eem_index}: fluorescence indices
\item \strong{abs_index}: absorbance indices
}
\subsection{Long format}{

If \code{return = "long"}, each data frame includes:
\itemize{
\item \code{sample_name}: sample ID
\item \code{meta_name}: sample name in metadata (or \code{sample_name} if missing)
\item \code{index}: index name
\item \code{value}: index value
\item \code{QAQC_flag}: any associated flags
}
}

\subsection{Wide format}{

If \code{return = "wide"}, each row corresponds to a sample, and columns represent
indices. Flags appear:
\itemize{
\item \emph{alone}, if no numeric value could be returned
\item in the form VALUE_FLAG when a value exists
}
}
}
\description{
Calculates commonly used indices from absorbance and excitationâ€“emission
matrix (EEM) data. Also checks and flags index values for potential issues.
}
\details{
\subsection{Index methods}{

Three preset index sets are available:
\itemize{
\item \strong{eemanalyzeR}: \code{\link[=eemanalyzeR_indices]{eemanalyzeR_indices()}}
\item \strong{eemR}: \code{\link[=eemR_indices]{eemR_indices()}}
\item \strong{usgs}: \code{\link[=usgs_indices]{usgs_indices()}}
}

You may also pass a custom index-generating function. See the
\href{../doc/custom-indices.html}{custom-indices vignette} for
instructions.
}

\subsection{QA/QC flags}{

Index values are checked for common issues. Flags include:
\itemize{
\item \strong{DATA01}: Missing data required for calculation
\item \strong{DATA02}: Missing required wavelengths; value may be inaccurate
\item \strong{DATA03}: Ratio denominator was zero
\item \strong{DATA04}: Spectral slope could not be calculated
\item \strong{DOC01}: Missing dissolved organic carbon (DOC) data
\item \strong{INF01}: Infinite value
\item \strong{MDL01}: All values below MDL
\item \strong{MDL02}: One or more values below MDL; use cautiously
\item \strong{MDL03}: Ratio index where numerator or denominator was entirely below MDL
\item \strong{NEG01}: Negative value
\item \strong{STD01}: Check standard value outside tolerance
\item \strong{VAL01}: Value below typical range
\item \strong{VAL02}: Value above typical range
}
}
}
\examples{
indices <- get_indices(
  example_processed_eems,
  example_processed_abs,
  qaqc_dir = system.file("extdata", package = "eemanalyzeR")
)
}
